---
import Button from '../ui/Button.astro';
import SocialIcons from '../ui/SocialIcons.astro';
import { defaultLang, useTranslations, type Lang } from '../../i18n/index';
import { getLocalizedPath } from '../../i18n/utils';

interface Props {
    name?: string;
    title?: string;
    subtitle?: string;
    imageUrl?: string;
    lang?: Lang;
}

const {
    name = 'Jonas Wilinski',
    title,
    subtitle,
    imageUrl = '/profile.png',
    lang = defaultLang,
} = Astro.props;

const t = useTranslations(lang);
const displayTitle = title || t('hero.title');
const displaySubtitle = subtitle || t('hero.subtitle');
---

<section class="relative min-h-screen flex items-center justify-center px-6 md:px-8 pt-24 pb-16 overflow-hidden">
    <!-- Background Pattern -->
    <div class="absolute inset-0 bg-dots opacity-50"></div>

    <!-- Subtle Gradient Background -->
    <div class="absolute inset-0 pointer-events-none">
        <!-- Static gradient orb -->
        <div
            class="absolute top-1/4 left-1/4 w-[500px] h-[500px] rounded-full blur-3xl"
            style="background: radial-gradient(circle, rgba(6, 182, 212, 0.12) 0%, transparent 70%);"
        ></div>

        <!-- Secondary static orb -->
        <div
            class="absolute bottom-1/4 right-1/4 w-[400px] h-[400px] rounded-full blur-3xl"
            style="background: radial-gradient(circle, rgba(34, 211, 238, 0.08) 0%, transparent 70%);"
        ></div>
    </div>

    <div class="relative z-10 max-w-6xl mx-auto w-full">
        <div class="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
            <!-- Text Content -->
            <div class="order-2 lg:order-1 text-center lg:text-left">
                <!-- Status Badge -->
                <div class="mb-2 animate-fade-in" style="animation-delay: 0.1s; opacity: 0;">
                    <span class="font-display font-medium text-xl md:text-2xl text-accent">
                        {t('hero.degree')}
                    </span>
                </div>

                <!-- Name -->
                <h1 class="font-display font-bold text-5xl md:text-6xl lg:text-7xl text-neutral-900 dark:text-white mb-4 animate-fade-in-up" style="animation-delay: 0.2s; opacity: 0;">
                    {name.split(' ').map((word, i) => (
                        <span class={i === 1 ? 'text-gradient' : ''}>
                            {word}{i === 0 ? ' ' : ''}
                        </span>
                    ))}
                </h1>

                <!-- Title -->
                <p class="font-display text-xl md:text-2xl text-neutral-600 dark:text-neutral-400 mb-6 animate-fade-in-up" style="animation-delay: 0.3s; opacity: 0;">
                    {displayTitle}
                </p>

                <!-- Subtitle -->
                <p class="text-lg text-neutral-500 dark:text-neutral-400 max-w-xl mx-auto lg:mx-0 mb-8 animate-fade-in-up" style="animation-delay: 0.4s; opacity: 0;">
                    {displaySubtitle}
                </p>

                <!-- CTAs -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start animate-fade-in-up" style="animation-delay: 0.5s; opacity: 0;">
                    <Button href={getLocalizedPath('/cv', lang)} variant="primary" size="lg">
                        {t('hero.viewExperience')}
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                        </svg>
                    </Button>
                    <Button href={getLocalizedPath('/contact', lang)} variant="outline" size="lg">
                        {t('hero.getInTouch')}
                    </Button>
                </div>

                <!-- Social Links -->
                <div class="flex justify-center lg:justify-start animate-fade-in-up" style="animation-delay: 0.6s; opacity: 0;">
                    <SocialIcons variant="inline" size="w-5 h-5" gap="gap-3" />
                </div>
            </div>

            <!-- Profile Image -->
            <div class="order-1 lg:order-2 flex justify-center lg:justify-end animate-scale-in" style="animation-delay: 0.3s; opacity: 0;">
                <div class="relative">
                    <!-- Subtle Glow -->
                    <div
                        class="absolute -inset-4 rounded-full blur-2xl"
                        style="background: radial-gradient(circle, rgba(6, 182, 212, 0.25) 0%, transparent 70%);"
                    ></div>

                    <!-- Image Container (protected) -->
                    <div class="relative w-64 h-64 md:w-80 md:h-80 lg:w-96 lg:h-96 rounded-full overflow-hidden shadow-2xl select-none">
                        <img
                            src={imageUrl}
                            alt={name}
                            class="w-full h-full object-contain pointer-events-none"
                            loading="eager"
                            draggable="false"
                            oncontextmenu="return false;"
                            onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
                        />
                        <!-- Invisible overlay to prevent easy saving -->
                        <div class="absolute inset-0" oncontextmenu="return false;"></div>
                        <!-- Placeholder when image not found -->
                        <div class="hidden w-full h-full items-center justify-center bg-gradient-to-br from-accent/30 to-cyan-400/30">
                            <span class="font-display font-bold text-6xl md:text-7xl lg:text-8xl text-white/80">
                                {name.split(' ').map(n => n[0]).join('')}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 animate-fade-in" style="animation-delay: 1s; opacity: 0;">
        <span class="text-xs font-medium text-neutral-500 uppercase tracking-wider">{t('hero.scroll')}</span>
        <div class="w-6 h-10 rounded-full border-2 border-neutral-300 dark:border-neutral-700 flex justify-center pt-2">
            <div class="w-1 h-2 rounded-full bg-neutral-400 dark:bg-neutral-600 animate-bounce"></div>
        </div>
    </div>
</section>
