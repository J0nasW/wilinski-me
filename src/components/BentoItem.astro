---
interface Props {
  class?: string;
  title?: string;
  subtitle?: string;
  span?: 1 | 2 | 3;
  rowSpan?: 1 | 2;
  href?: string;
}

const { class: className, title, subtitle, span = 1, rowSpan = 1, href } = Astro.props;

// Calculate grid span classes
const colSpanClass = {
  1: 'md:col-span-1',
  2: 'md:col-span-2',
  3: 'md:col-span-3'
}[span];

const rowSpanClass = {
  1: 'md:row-span-1',
  2: 'md:row-span-2'
}[rowSpan];

const Component = href ? 'a' : 'div';
---

<Component 
  href={href}
  class:list={[
    "group relative p-6 md:p-8 rounded-3xl overflow-hidden bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 transition-all duration-300",
    href && "hover:border-blue-500/50 hover:shadow-xl hover:-translate-y-1 cursor-pointer",
    colSpanClass,
    rowSpanClass,
    className
  ]}
>
  {/* Noise Texture Overlay */}
  <div class="absolute inset-0 opacity-[0.03] pointer-events-none bg-noise mix-blend-overlay"></div>
  
  {/* Gradient Blob for Hover Quality */}
  <div class="absolute -inset-px opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-0 bg-gradient-to-br from-blue-500/10 via-transparent to-transparent pointer-events-none"></div>

  <div class="relative z-10 h-full flex flex-col">
    {/* Header */}
    {(title || subtitle) && (
      <div class="mb-4">
        {subtitle && <span class="text-xs font-bold tracking-wider text-blue-600 dark:text-blue-400 uppercase mb-1 block">{subtitle}</span>}
        {title && <h3 class="text-xl md:text-2xl font-serif font-bold text-slate-900 dark:text-white leading-tight">{title}</h3>}
      </div>
    )}
    
    {/* Content */}
    <div class="flex-1">
      <slot />
    </div>
  </div>
</Component>
