---
import { languages, type Lang } from '../i18n/index';
import { getAlternateLanguagePath } from '../i18n/utils';

interface Props {
    lang: Lang;
    class?: string;
}

const { lang, class: className = '' } = Astro.props;
const currentPath = Astro.url.pathname;
---

<div class:list={['flex items-center gap-1 text-sm', className]}>
    {Object.entries(languages).map(([code, name]) => {
        const isActive = code === lang;
        const href = getAlternateLanguagePath(currentPath, lang, code as Lang);

        return (
            <a
                href={href}
                class:list={[
                    'px-2 py-1 rounded-md font-medium transition-colors',
                    isActive
                        ? 'bg-neutral-200 dark:bg-neutral-700 text-neutral-900 dark:text-white'
                        : 'text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-100 dark:hover:bg-neutral-800'
                ]}
                aria-current={isActive ? 'page' : undefined}
            >
                {code.toUpperCase()}
            </a>
        );
    })}
</div>
